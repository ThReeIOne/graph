# 基于图结构的路径规划系统 - 运行指南

## 📋 目录
- [系统要求](#系统要求)
- [快速开始](#快速开始)
- [编译运行](#编译运行)
- [功能测试](#功能测试)
- [使用示例](#使用示例)
- [故障排除](#故障排除)

## 🔧 系统要求

- **操作系统**: Linux, macOS, Windows (WSL)
- **编译器**: GCC (支持C99标准)
- **工具**: Make
- **终端**: 支持UTF-8编码的终端

## 🚀 快速开始

### 1. 编译项目
```bash
# 进入项目目录
cd graph

# 编译项目
make all
```

### 2. 运行程序
```bash
# 方式1：直接运行
./bin/pathfinding

# 方式2：使用make运行
make run
```

## 🔨 编译运行

### 编译选项
```bash
# 标准编译
make all

# 清理编译文件
make clean

# 调试模式编译
make debug

# 发布模式编译（优化）
make release

# 查看帮助
make help

# 清理后重新编译
make clean && make all
```

### 验证编译
```bash
# 检查可执行文件
ls -la bin/pathfinding

# 检查文件类型
file bin/pathfinding
```

## 🧪 功能测试

### 主菜单功能
程序启动后会显示：
```
=== 路径规划系统菜单 ===
1. 添加节点
2. 添加边
3. 查找路径
4. 更新边权重
5. 设置障碍
6. 显示图信息
0. 退出
=======================
```

### 测试步骤

#### 🔍 1. 基本路径查找测试
```
选择: 3
输入起点名称: 校门口
输入终点名称: 图书馆
选择交通方式 (0-步行, 1-驾车): 0
是否显示详细信息? (y/n): y
```

#### 📊 2. 查看图信息
```
选择: 6
```
这会显示所有节点和边的信息。

#### ⚡ 3. 动态权重调整测试（模拟交通拥堵）
```
选择: 4
输入起点名称: 校门口
输入终点名称: 图书馆
选择交通方式 (0-步行, 1-驾车): 1
输入新权重: 600
```
然后重新查找路径，对比权重调整前后的结果。

#### 🚧 4. 障碍设置测试
```
选择: 5
输入节点名称: 食堂
设置可访问性 (1-可访问, 0-不可访问): 0
```
设置障碍后，尝试查找经过该节点的路径。

#### ➕ 5. 添加新节点测试
```
选择: 1
输入节点名称: 新教学楼
输入纬度: 40.0011
输入经度: 116.0011
输入节点类型 (0-普通, 1-交通枢纽, 2-障碍): 0
```

#### 🔗 6. 添加新边测试
```
选择: 2
输入起点名称: 校门口
输入终点名称: 新教学楼
输入距离(米): 500
输入时间成本(秒): 400
输入步行权重: 500
输入驾车权重: 300
```

## 📝 使用示例

### 示例1：查找最短路径
```bash
./bin/pathfinding
# 选择 3 -> 输入"宿舍区" -> 输入"图书馆" -> 选择 0 -> 输入 y
```

### 示例2：对比不同交通方式
```bash
# 步行模式
3 -> 宿舍区 -> 体育馆 -> 0

# 驾车模式  
3 -> 宿舍区 -> 体育馆 -> 1
```

### 示例3：模拟交通拥堵场景
```bash
# 1. 正常情况下查找路径
3 -> 校门口 -> 实验楼 -> 1

# 2. 增加某段路的权重（模拟拥堵）
4 -> 校门口 -> 图书馆 -> 1 -> 1000

# 3. 重新查找路径，观察路径变化
3 -> 校门口 -> 实验楼 -> 1
```

## 🔧 故障排除

### 编译问题
```bash
# 如果编译失败，检查GCC版本
gcc --version

# 确保有make工具
make --version

# 清理后重新编译
make clean
make all
```

### 运行问题
```bash
# 如果提示权限不足
chmod +x bin/pathfinding

# 如果找不到文件
ls -la bin/
```

### 中文显示问题
```bash
# 设置终端编码为UTF-8
export LANG=zh_CN.UTF-8
export LC_ALL=zh_CN.UTF-8
```

## 🎯 快速测试脚本

创建自动化测试：
```bash
# 创建测试输入文件
cat > test_input.txt << EOF
3
校门口
图书馆
0
n
4
校门口
图书馆
0
500
3
校门口
图书馆
0
n
6
0
EOF

# 运行自动化测试
./bin/pathfinding < test_input.txt
```

## 🌟 预置数据说明

系统预置了校园地图数据，包含以下地点：
- **校门口** (交通枢纽)
- **图书馆**
- **教学楼**
- **食堂**
- **宿舍区**
- **体育馆**
- **实验楼**

## 📚 进阶测试

### 性能测试
1. 添加多个节点和边
2. 测试复杂路径查找
3. 观察算法执行时间

### 边界测试
1. 输入不存在的节点名称
2. 设置所有路径为不可访问
3. 测试极大权重值

### 功能组合测试
1. 设置障碍 + 权重调整 + 路径查找
2. 多种交通方式对比
3. 动态图结构变化测试

---

**提示**: 使用 `Ctrl+C` 可以随时中断程序运行。
